{
  "!type": "Form",
  "_uuid": "2b3177c452ed42ecabc79be07f8e4b84",
  "HTML": "",
  "attributes": "",
  "background": "",
  "backgroundimage": "",
  "borderColor": "",
  "borderStyle": "",
  "borderWidth": "",
  "cached_js": "pw = \"Bluejay*2021\"\n\n/*\n1. Used a textArea  or Dropdown that shows all the customer names, one per line.\nUser can pick a customer from the list.  \nUsed a sql Delete  query to delete the customer chosen by the user from the display control. \nUsed an AJAX call to the database to delete the matching customer. \nChecked if customer name exists in database before deleting it.\nUsed a textArea to show the user the remaining customer names, using a template literal. \n*/\n\ncustomerDelete.onshow=function(){\n  txtResults_contents.style.height = \"200px\"\n//create select statement\nlet query = \"SELECT * FROM customer\"\n          \n// Below change from my netID to yours (twice: user and database)    \nlet req = Ajax(\"https://ormond.creighton.edu/courses/375/ajax-connection.php\", \"POST\", \"host=ormond.creighton.edu&user=bgt15846&pass=\" + pw + \"&database=bgt15846&query=\" + query)\n\n  if (req.status == 200) { //transit trip worked.\n    //has all roqs for for ex hores records \n       allCustomerData = JSON.parse(req.responseText)\n        console.log(results)\n      }\n//if there are no customers\nif (results.length == 0)    // no results were returned by the query\n       lblError.value  = \"There are no customers.\"\nelse \n        console.log(`the parsed JSON is ${results}`)\n        console.log(`the first row/item in the big array is a small array: ${results[0]}`)\n//show all customer names \n  for (i = 0; i <=  allCustomerData.length-1; i++) \n    txtNames.addItem(results[i][1])\n\n//when the user clicks a name \ntxtNames.onclick=function(){\n  let customerDelete = txtNames.value\n  //make sure in the database \n  let found = false \n   for (i = 0; i <= allCustomerData.length-1; i++) {\n     if(customerDelete == allCustomerData[i][1])\n     found = true \n     break\n}\n    if (found == false)\n       NSB.MsgBox(\"That customer name is not in the database.\")\n    else if (found == true) {\n      let query = \"DELETE FROM customer WHERE name = \" + '\"' + customerDelete + '\"'\n      req = Ajax(\"https://ormond.creighton.edu/courses/375/ajax-connection.php\", \"POST\", \"host=ormond.creighton.edu&user=bgt15846&pass=\" + pw + \"&database=bgt15846&query=\" + query)\n\n      if (req.status == 200) { //transit worked.\n            if (req.responseText == 500)    // means the insert succeeded\n                NSB.MsgBox(`You have successfully deleted  ${customerDelete}`)\n            else\n                NSB.MsgBox(`There was a problem deleting ${customerDelete} from the database.`)\n      } else {\n        // transit error\n        NSB.MsgBox(`Error: ${req.status}`);\n      }  \n} else {\n//for listing all of the names that have not been deleted \n    let message = \" \"\n    for (i = 0; i < allCustomerData.length-1; i++)\n    message = message + allCustomerData[i][0] + \"\\n\"\n    txtNonDelete.value = message\n} \n       \n       \n       \n       \n       \n       \n       \n       \n       \n       \n  //allows the reults to be matched to a state - and adds to an array \n    \n    for (i = 0; i < results.length[i][1]; i++)\n      if (state == results[i][4])\n        displayNames.push(results[i][1])\n         newQuery = `SELECT name FROM customer WHERE state = ${customerState}`\n          //write a select statement to show the state in the box \n        newQuery = `SELECT name FROM customer WHERE state = ${customerState}`\n        req = Ajax(\"https://ormond.creighton.edu/courses/375/ajax-connection.php\", \"POST\", \"host=ormond.creighton.edu&user=bgt15846&pass=\" + pw + \"&database=bgt15846&query=\" + query)\n        if (req.status == 200) { //transit trip worked.\n    //has all roqs for for ex hores records \n       results = JSON.parse(req.responseText)\n //PROBLEM WITH THE ELSE \n else \n    let message = \" \"\n    for (i = 0; i < results.length-1; i++)\n    message = message + results[i][0] + \"\\n\"\n    txtAllStates.value = message\n     // end else\n  else\n      txtAllStates = `Error code:  + req.status `\n\n        \n\n\n}\n\n\n}\n",
  "cached_js_script_hash": "f89c066e1ac2bcb39e5907d6df0ae7db",
  "children": [
    {
      "!type": "Textarea_bs4",
      "_uuid": "3dce5faa5b3945f0b4900c89eb983af0",
      "align": "",
      "autocapitalize": "",
      "autocomplete": "",
      "autocorrect": "",
      "backgroundColor": "",
      "badge": "",
      "badgeAppearance": " badge-info",
      "bottom": "auto",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "class": "",
      "color": "",
      "disabled": "",
      "display": "",
      "expanded_pmp": true,
      "fontFamily": "",
      "fontSize": "",
      "fontStyle": "",
      "fontWeight": "",
      "footer": "",
      "header": "Customer Display",
      "headerCols": 2,
      "height": "auto",
      "hidden": "",
      "icon": "",
      "iconTitle": "",
      "id": "txtCustomer",
      "inputmode": "",
      "left": 26,
      "mAll": "",
      "mBottom": "",
      "mLeft": "",
      "mRight": "",
      "mTop": "",
      "maxlength": "",
      "name": "",
      "onchange": "",
      "onclick": "txtNames.onclick()",
      "oncopy": "",
      "oncut": "",
      "onfocusin": "",
      "onfocusout": "",
      "oninput": "",
      "onkeypress": "",
      "onkeyup": "",
      "onmousedown": "",
      "onmousemove": "",
      "onmouseout": "",
      "onmouseup": "",
      "onpaste": "",
      "onresize": "",
      "ontouchend": "",
      "ontouchmove": "",
      "ontouchstart": "",
      "pAll": "",
      "pBottom": "",
      "pLeft": "",
      "pRight": "",
      "pTop": "",
      "placeholder": "Enter text here",
      "popBody": "Body",
      "popClose": "hover",
      "popPosition": "",
      "popStyle": "popover",
      "popTitle": "Title",
      "readonly": "",
      "required": "",
      "right": "auto",
      "rows": "",
      "script": "",
      "spellcheck": "true",
      "style": "",
      "top": 61,
      "validation": "",
      "value": "",
      "valueCols": 10,
      "width": 273
    },
    {
      "!type": "Textarea_bs4",
      "_uuid": "ea7f24cb26ac4ef3824110572a6de35a",
      "align": "",
      "autocapitalize": "",
      "autocomplete": "",
      "autocorrect": "",
      "backgroundColor": "",
      "badge": "",
      "badgeAppearance": " badge-info",
      "bottom": "auto",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "class": "",
      "color": "",
      "disabled": "",
      "display": "",
      "expanded_pmp": true,
      "fontFamily": "",
      "fontSize": "",
      "fontStyle": "",
      "fontWeight": "",
      "footer": "",
      "header": "All Customers",
      "headerCols": 2,
      "height": "auto",
      "hidden": "",
      "icon": "",
      "iconTitle": "",
      "id": "txtNonDelete1",
      "inputmode": "",
      "left": 11,
      "mAll": "",
      "mBottom": "",
      "mLeft": "",
      "mRight": "",
      "mTop": "",
      "maxlength": "",
      "name": "",
      "onchange": "",
      "onclick": "",
      "oncopy": "",
      "oncut": "",
      "onfocusin": "",
      "onfocusout": "",
      "oninput": "",
      "onkeypress": "",
      "onkeyup": "",
      "onmousedown": "",
      "onmousemove": "",
      "onmouseout": "",
      "onmouseup": "",
      "onpaste": "",
      "onresize": "",
      "ontouchend": "",
      "ontouchmove": "",
      "ontouchstart": "",
      "pAll": "",
      "pBottom": "",
      "pLeft": "",
      "pRight": "",
      "pTop": "",
      "placeholder": "Enter text here",
      "popBody": "Body",
      "popClose": "hover",
      "popPosition": "",
      "popStyle": "popover",
      "popTitle": "Title",
      "readonly": "",
      "required": "",
      "right": "auto",
      "rows": "",
      "script": "",
      "spellcheck": "true",
      "style": "",
      "top": 265,
      "validation": "",
      "value": "",
      "valueCols": 10,
      "width": "auto"
    },
    {
      "!type": "Label_bs4",
      "_uuid": "20470c279bb240afbe0bc82c8af52e98",
      "appearance": "primary",
      "backgroundColor": "",
      "borderRadius": "0",
      "bottom": "auto",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "class": "",
      "color": "",
      "display": "",
      "expanded_pmp": true,
      "fontFamily": "",
      "fontSize": "",
      "fontStyle": "",
      "fontWeight": "",
      "height": 46,
      "hidden": "",
      "id": "lblError1",
      "labelStyle": "text",
      "left": 105,
      "mAll": "",
      "mBottom": "",
      "mLeft": "",
      "mRight": "",
      "mTop": "",
      "onclick": "",
      "onmousedown": "",
      "onmousemove": "",
      "onmouseout": "",
      "onmouseup": "",
      "onresize": "",
      "ontouchend": "",
      "ontouchmove": "",
      "ontouchstart": "",
      "pAll": "",
      "pBottom": "",
      "pLeft": "",
      "pRight": "",
      "pTop": "",
      "right": "auto",
      "script": "",
      "style": "",
      "top": 48,
      "value": "Label",
      "width": 186
    },
    {
      "!type": "Button_bs4",
      "_uuid": "15becd1460d644f592d972cbd59cfc3d",
      "ChangeForm": "",
      "appearance": " btn-secondary",
      "backgroundColor": "",
      "badge": "",
      "badgeAppearance": " badge-info",
      "blockLevel": "",
      "borderColor": "",
      "borderStyle": "",
      "borderWidth": "",
      "bottom": "auto",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "class": "",
      "color": "",
      "disabled": "",
      "display": "",
      "expanded_pmp": true,
      "fontFamily": "",
      "fontSize": "",
      "fontStyle": "",
      "fontWeight": "",
      "groupStyle": "",
      "grouping": "",
      "height": "auto",
      "hidden": "",
      "icon": "",
      "iconTitle": "",
      "id": "btnAddJess",
      "left": 106,
      "mAll": "",
      "mBottom": "",
      "mLeft": "",
      "mRight": "",
      "mTop": "",
      "onclick": "btnAddJess.onclick()",
      "onmousedown": "",
      "onmousemove": "",
      "onmouseout": "",
      "onmouseup": "",
      "onresize": "",
      "ontouchend": "",
      "ontouchmove": "",
      "ontouchstart": "",
      "outline": "",
      "pAll": "",
      "pBottom": "",
      "pLeft": "",
      "pRight": "",
      "pTop": "",
      "popBody": "Body",
      "popClose": "hover",
      "popPosition": "",
      "popStyle": "popover",
      "popTitle": "Title",
      "right": "auto",
      "script": "",
      "size": " btn-md",
      "style": "",
      "toggleControl": "",
      "top": 189,
      "value": "Add Customer",
      "width": 107
    }
  ],
  "class": "",
  "designHeight": 0,
  "designWidth": 0,
  "expanded_pmp": true,
  "fullScreen": "true",
  "height": 460,
  "id": "customerAdd",
  "language": "JavaScript",
  "left": "0",
  "locked": false,
  "modal": "false",
  "onhide": "",
  "onkeypress": "",
  "onresize": "",
  "onshow": "customerAdd.onshow()",
  "openMode": "none",
  "parentForm": "",
  "position": "absolute",
  "script": "\n/*\nINSERT a pet into the database (assume it is not already in the database)\n  Algorithm\n  1. get the name and type of the pet they want to insert into the database.\n  2. create insert query\n  3. test the query in the database\n  4. run query (ajax call)\n    > if transit worked, check .responseText for query results\n         - if .responseText is 500, means the insert worked - tell user so\n         - if .responseText is not 500, means the insert did not work - tell user so\n    > if transit didn't work, tell user error in transit\n*/\n\npw = //\"Bluejay*2021\"\ncustomerAdd.onshow=function(){\n  txtCustomer_contents.style.height = \"200px\"\n//create select statement\nlet query = \"SELECT * FROM customer\"\n          \n// Below change from my netID to yours (twice: user and database)    \nlet req = Ajax(\"https://ormond.creighton.edu/courses/375/ajax-connection.php\", \"POST\", \"host=ormond.creighton.edu&user=bgt15846&pass=\" + pw + \"&database=bgt15846&query=\" + query)\n\n  if (req.status == 200) { //transit trip worked.\n    //has all roqs for for ex hores records \n       allCustomer = JSON.parse(req.responseText)\n        console.log(results)\n      }\n//if there are no customers\nif (results.length == 0)    // no results were returned by the query\n       lblError1.value  = \"There are no customers.\"\nelse \n        console.log(`the parsed JSON is ${results}`)\n        console.log(`the first row/item in the big array is a small array: ${results[0]}`)\n//show all customer names \n  for (i = 0; i <=  allCustomer.length-1; i++) \n    txtCustomer.addItem(results[i][1])\n}\n//hard code Jess antiques into the database! \n//create variables for Jess Antiques \n//do this in the on click - then add to the customer dropdown table\nbtnAddJess.onclick=function(){\n\n    let customerName = \"Jess Antiques\"\n    let customerStreet = \" 1113 F St\" \n    let customerCity = \"Omaha\"\n    let customerState = \"NE\"\n    let customerzipcode = \"68178\"\n    let query = \"INSERT INTO customer (name, street, city, zipcode) VALUES ('\" + customerName + \"', '\" + \"', \" + customerStreet \"+ \" + customerCity + \"', '\" +   customerState '\" + \"', \" +, '\" + \"', \" + customerZipcode\")\n    //alert(query)\n    req = Ajax(\"https://ormond.creighton.edu/courses/375/ajax-connection.php\", \"POST\", \"host=ormond.creighton.edu&user=clc90595&pass=\" + pw + \"&database=clc90595&query=\" + query)\n\n    if (req.status == 200) { //transit worked.\n        if (req.responseText == 500) {   // means the insert succeeded\n            NSB.MsgBox(\"You have successfully added the customer!\")\n        } else\n            NSB.MsgBox(\"There was a problem with adding the Jess Antiques to the database.\")\n    } else {\n        // transit error\n        NSB.MsgBox(\"Error: \" + req.status);\n    }  \n\n} else {\n//shows all the customers that are in the database in the 2nd textarea\n    let message = \" \"\n    for (i = 0; i < allCustomer.length-1; i++)\n    message = message + allCustomer[i][0] + \"\\n\"\n    txtNonDelete1.value = message\n} \n       \n\n\n",
  "setFocusID": "",
  "style": "",
  "theme": "",
  "top": "0",
  "width": 320,
  "_functions": [
    {
      "!type": "Form",
      "_uuid": "c4657a6564b24e48985fc162200caf13",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "expanded_pmp": true,
      "id": "customerAdd.onshow",
      "location": [
        15,
        16
      ],
      "script": "",
      "signature": "customerAdd.onshow()"
    },
    {
      "!type": "Form",
      "_uuid": "da40a4555c1e44cc81d19d8e06733c7d",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "expanded_pmp": true,
      "id": "btnSubmit.onclick",
      "location": [
        40,
        41
      ],
      "script": "",
      "signature": "btnSubmit.onclick()"
    },
    {
      "!type": "Form",
      "_uuid": "0d48910b35484bcf89aa73813d20ac25",
      "cached_js": "",
      "cached_js_script_hash": "d41d8cd98f00b204e9800998ecf8427e",
      "children": [],
      "expanded_pmp": true,
      "id": "btnAddJess.onclick",
      "location": [
        80,
        81
      ],
      "script": "",
      "signature": "btnAddJess.onclick()"
    }
  ]
}